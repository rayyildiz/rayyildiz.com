<!doctype html><html lang=tr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="tr"><meta name=author content="Ramazan AYYILDIZ"><meta name=description content="JDK6 da ise ServiceLoader gelmektedir. ServiceLoader sayesinde bir nevi DI sağlamış olmaktayız. Bunun nasıl yapacağımızı bir örnekle gösterelim.
Uygulamanın örnek test kodlarını github üzerinden bulabilmeniz mümkündür.
Bu örneği yapabilmek için 3 tane proje oluşturalım. Bu 3 proje ve açıklaması şu şekildedir:
UserAuth: Arayüzün yer aldığı proje.IUserAuthService diye bir arayüz yer almakta ve bu arayüz login diye bir metot tanımı içermektedir.
UserAuthImpl: Uygulamanın gerçekleştirildiği sınıf yer alır.
UserAuthTest: Main sınıfının yer aldığı örnek uygulamadır."><meta name=keywords content="blog,developer,kişisel"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://rayyildiz.com/avatars/rayyildiz.jpg"><meta name=twitter:title content="JDK6 da Dependency Injection (ServiceLoader)"><meta name=twitter:description content="JDK6 da ise ServiceLoader gelmektedir. ServiceLoader sayesinde bir nevi DI sağlamış olmaktayız. Bunun nasıl yapacağımızı bir örnekle gösterelim.
Uygulamanın örnek test kodlarını github üzerinden bulabilmeniz mümkündür.
Bu örneği yapabilmek için 3 tane proje oluşturalım. Bu 3 proje ve açıklaması şu şekildedir:
UserAuth: Arayüzün yer aldığı proje.IUserAuthService diye bir arayüz yer almakta ve bu arayüz login diye bir metot tanımı içermektedir.
UserAuthImpl: Uygulamanın gerçekleştirildiği sınıf yer alır.
UserAuthTest: Main sınıfının yer aldığı örnek uygulamadır."><meta property="og:title" content="JDK6 da Dependency Injection (ServiceLoader)"><meta property="og:description" content="JDK6 da ise ServiceLoader gelmektedir. ServiceLoader sayesinde bir nevi DI sağlamış olmaktayız. Bunun nasıl yapacağımızı bir örnekle gösterelim.
Uygulamanın örnek test kodlarını github üzerinden bulabilmeniz mümkündür.
Bu örneği yapabilmek için 3 tane proje oluşturalım. Bu 3 proje ve açıklaması şu şekildedir:
UserAuth: Arayüzün yer aldığı proje.IUserAuthService diye bir arayüz yer almakta ve bu arayüz login diye bir metot tanımı içermektedir.
UserAuthImpl: Uygulamanın gerçekleştirildiği sınıf yer alır.
UserAuthTest: Main sınıfının yer aldığı örnek uygulamadır."><meta property="og:type" content="article"><meta property="og:url" content="https://rayyildiz.com/tr/posts/jdk6-ile-dependency-injection/"><meta property="og:image" content="https://rayyildiz.com/avatars/rayyildiz.jpg"><meta property="article:published_time" content="2010-08-22T00:00:00+00:00"><meta property="article:modified_time" content="2010-08-22T00:00:00+00:00"><meta property="og:site_name" content="Ramazan AYYILDIZ"><base href=https://rayyildiz.com/tr/posts/jdk6-ile-dependency-injection/><title>JDK6 da Dependency Injection (ServiceLoader) · Ramazan AYYILDIZ</title><link rel=canonical href=https://rayyildiz.com/tr/posts/jdk6-ile-dependency-injection/><link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700&display=swap" rel=stylesheet><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.13.0/css/all.css integrity=sha384-Bfad6CLCknfcloXFOyFnlgtENryhrpZCe29RTifKEixXQZ38WheV+i/6YWSzkz3V crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin=anonymous><link rel=stylesheet href=https://rayyildiz.com/css/coder.min.0e5ce5b959a68dfe0232c6ddcec1e8ef154517c968464707f3181c437fe611c0.css integrity="sha256-DlzluVmmjf4CMsbdzsHo7xVFF8loRkcH8xgcQ3/mEcA=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://rayyildiz.com/css/coder-dark.min.717236c74e0a5208ef73964a9f44c6b443b689a95b270d8b2a40d0c012460dac.css integrity="sha256-cXI2x04KUgjvc5ZKn0TGtEO2ialbJw2LKkDQwBJGDaw=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://rayyildiz.com/custom.css><link rel=icon type=image/png href=https://rayyildiz.com/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://rayyildiz.com/images/favicon-16x16.png sizes=16x16><meta name=generator content="Hugo 0.74.3"></head><body class=colorscheme-auto><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://rayyildiz.com/tr>Ramazan AYYILDIZ</a>
<span id=dark-mode-toggle class=float-right><i class="fas fa-adjust fa-fw"></i></span><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fas fa-bars fa-fw"></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=https://rayyildiz.com/tr/tags/java/>Java</a></li><li class=navigation-item><a class=navigation-link href=https://rayyildiz.com/tr/tags/software-development/>Yazılım Geliştirme</a></li><li class=navigation-item><a class=navigation-link href=https://rayyildiz.com/tr/posts/>Tüm Yazılar</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class=navigation-item><a href=https://rayyildiz.com/>English</a></li><li class="navigation-item separator"><span>|</span></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title>JDK6 da Dependency Injection (ServiceLoader)</h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fas fa-calendar"></i><time datetime=2010-08-22T00:00:00Z>August 22, 2010</time></span>
<span class=reading-time><i class="fas fa-clock"></i>Bir dakikalık okuma</span></div><div class=categories><i class="fas fa-folder"></i><a href=https://rayyildiz.com/tr/categories/genel/>Genel</a>
<span class=separator>•</span>
<a href=https://rayyildiz.com/tr/categories/yazilim-gelistirme/>Yazilim Gelistirme</a></div><div class=tags><i class="fas fa-tag"></i><a href=https://rayyildiz.com/tr/tags/java/>java</a></div></div></header><div><p>JDK6 da ise ServiceLoader gelmektedir. <a href=http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/util/ServiceLoader.html>ServiceLoader</a> sayesinde bir nevi DI sağlamış olmaktayız. Bunun nasıl yapacağımızı bir örnekle gösterelim.</p><p>Uygulamanın örnek test kodlarını <a href=http://github.com/rayyildiz/UserAuthSample>github</a> üzerinden bulabilmeniz mümkündür.</p><p>Bu örneği yapabilmek için 3 tane proje oluşturalım. Bu 3 proje ve açıklaması şu şekildedir:</p><p><strong>UserAuth</strong>: Arayüzün yer aldığı proje.IUserAuthService diye bir arayüz yer almakta ve bu arayüz login diye bir metot tanımı içermektedir.</p><p><strong>UserAuthImpl</strong>: Uygulamanın gerçekleştirildiği sınıf yer alır.</p><p><strong>UserAuthTest</strong>: Main sınıfının yer aldığı örnek uygulamadır.</p><p><img src=https://rayyildiz.com/images/project_tree1.jpg alt="Project Tree"></p><p>Arayüzün yer aldığı UserAuth projesinde farklı olarak META-INF/services klasörü- ve bu klasör içinde com.rayyildiz.userauth.IUserAuthService dosyası yer almaktadır. Bu dosya içine bakarsanız sadece bir satır yer almaktadır.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>com.rayyildiz.userauth.impl.UserAuthService
</code></pre></div><p>ServiceLoader bu dosyalara bakarak hangi implemantosyunu yüklemesi gerektiğini anlar. UserAuth.jar implementasyonun yer aldığı UserAuthImpl.jar referans olarak bilmez. SericeLoader load sırasında bu implementasyonu arayacaktır.</p><p>Burada asıl önemli test projemize bakalım:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#ff79c6>package</span> com.rayyildiz.userauth<span style=color:#ff79c6>;</span>

<span style=color:#ff79c6>import</span> java.util.Iterator<span style=color:#ff79c6>;</span>
<span style=color:#ff79c6>import</span> java.util.ServiceLoader<span style=color:#ff79c6>;</span>

<span style=color:#8be9fd;font-style:italic>public</span> <span style=color:#8be9fd;font-style:italic>class</span> <span style=color:#50fa7b>Main</span> <span style=color:#ff79c6>{</span>
	<span style=color:#8be9fd;font-style:italic>public</span> <span style=color:#8be9fd;font-style:italic>static</span> <span style=color:#8be9fd>void</span> <span style=color:#50fa7b>main</span><span style=color:#ff79c6>(</span>String<span style=color:#ff79c6>[]</span> args<span style=color:#ff79c6>)</span> <span style=color:#ff79c6>{</span>
		ServiceLoader<span style=color:#ff79c6>&lt;</span>IUserAuthService<span style=color:#ff79c6>&gt;</span> loader <span style=color:#ff79c6>=</span> ServiceLoader<span style=color:#ff79c6>.</span><span style=color:#50fa7b>load</span><span style=color:#ff79c6>(</span>IUserAuthService<span style=color:#ff79c6>.</span><span style=color:#50fa7b>class</span><span style=color:#ff79c6>);</span>
		Iterator<span style=color:#ff79c6>&lt;</span>IUserAuthService<span style=color:#ff79c6>&gt;</span> iterator <span style=color:#ff79c6>=</span> loader<span style=color:#ff79c6>.</span><span style=color:#50fa7b>iterator</span><span style=color:#ff79c6>();</span>
		<span style=color:#ff79c6>while</span><span style=color:#ff79c6>(</span>iterator<span style=color:#ff79c6>!=</span> <span style=color:#ff79c6>null</span> <span style=color:#ff79c6>&amp;&amp;</span> iterator<span style=color:#ff79c6>.</span><span style=color:#50fa7b>hasNext</span><span style=color:#ff79c6>()){</span>
			IUserAuthService userAuthService <span style=color:#ff79c6>=</span> iterator<span style=color:#ff79c6>.</span><span style=color:#50fa7b>next</span><span style=color:#ff79c6>();</span>
			<span style=color:#8be9fd>boolean</span> login <span style=color:#ff79c6>=</span> userAuthService<span style=color:#ff79c6>.</span><span style=color:#50fa7b>login</span><span style=color:#ff79c6>(</span><span style=color:#f1fa8c>&#34;demo&#34;</span><span style=color:#ff79c6>,</span> <span style=color:#f1fa8c>&#34;password&#34;</span><span style=color:#ff79c6>);</span>
			System<span style=color:#ff79c6>.</span><span style=color:#50fa7b>out</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>println</span><span style=color:#ff79c6>(</span><span style=color:#f1fa8c>&#34;Login for username: demo and password:password is &#34;</span> <span style=color:#ff79c6>+</span> login<span style=color:#ff79c6>);</span>
		<span style=color:#ff79c6>}</span>
	<span style=color:#ff79c6>}</span>
<span style=color:#ff79c6>}</span>
</code></pre></div><p>Gördüğünüz gibi test uygulaması implementasyon nesnesini görmez. ServiceLoader META-INF/services içinde yer alan dosyalara bakarak implementasyon nesnelerini örnek projenin olduğu klasörde ve CLASSPATH de arar.</p></div><footer><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"rayyildiz"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></footer></article></section></div><footer class=footer><section class=container><p><a href=https://github.com/rayyildiz/rayyildiz.com/blob/master/LICENSE>Copytight</a> © rayyildiz.com</p></section></footer></main><script src=https://rayyildiz.com/js/dark-mode.min.0213e1773e6d1c5a644f847c67a6f8abac49a3776e2976f6008038af8c5b76a1.js></script></body></html>