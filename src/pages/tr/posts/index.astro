---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
import { getPostSlug, isLangPost, isNotDraft, postDateValue } from '../../../lib/content';

const posts = (await getCollection('posts')).filter((p) => isLangPost('tr', p) && isNotDraft(p));
posts.sort((a, b) => postDateValue(b) - postDateValue(a));
---

<BaseLayout lang="tr" title="YazÄ±lar">
  <h1 class="text-3xl font-bold gradient-text">YazÄ±lar</h1>
  <ul class="mt-8 space-y-4">
    {posts.map((p) => (
      <li class="group p-4 -mx-4 rounded-xl hover:bg-[var(--color-bg-secondary)] border border-transparent hover:border-[var(--color-border)] transition-all">
        <a class="text-lg font-semibold text-[var(--color-text)] group-hover:text-primary-600 transition-colors" href={`/tr/posts/${getPostSlug(p)}/`}>{p.data.title}</a>
        {p.data.date ? <div class="text-sm text-[var(--color-text-secondary)] mt-1 flex items-center gap-1"><span class="text-accent-500">ðŸ“…</span> {p.data.date.toISOString().slice(0, 10)}</div> : null}
      </li>
    ))}
  </ul>
</BaseLayout>
