<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Ramazan AYYILDIZ">
    <meta name="description" content="Strona domowa John&#39;a Doe">
    <meta name="keywords" content="blog,developer,strona domowa">

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="JDK6 da Dependency Injection (ServiceLoader)"/>
<meta name="twitter:description" content="DI ne olduğuna dair bir yazıyı buradan ulaşabilirsiniz. JDK6 da ise ServiceLoader gelmektedir. ServiceLoader sayesinde bir nevi DI sağlamış olmaktayız. Bunun nasıl yapacağımızı bir örnekle gösterelim.
Uygulamanın örnek test kodlarını github üzerinden bulabilmeniz mümkündür.
Bu örneği yapabilmek için 3 tane proje oluşturalım. Bu 3 proje ve açıklaması şu şekildedir:
UserAuth: Arayüzün yer aldığı proje.IUserAuthService diye bir arayüz yer almakta ve bu arayüz login diye bir metot tanımı içermektedir.
UserAuthImpl: Uygulamanın gerçekleştirildiği sınıf yer alır."/>


    <base href="http://rayyildiz.com/tr/posts/jdk6-ile-dependency-injection/">
    <title>
  JDK6 da Dependency Injection (ServiceLoader) · Ramazan AYYILDIZ
</title>

    <link rel="canonical" href="http://rayyildiz.com/tr/posts/jdk6-ile-dependency-injection/">

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700|Merriweather:300,700|Source+Code+Pro:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css" integrity="sha256-oSrCnRYXvHG31SBifqP2PM1uje7SJUyX0nTwO2RJV54=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="http://rayyildiz.com/css/coder.min.ac37073bc2826cd28ef57364a9fe339de7ebcb26dafc22fd832cb35cf5b1d048.css" integrity="sha256-rDcHO8KCbNKO9XNkqf4znefryyba/CL9gyyzXPWx0Eg=" crossorigin="anonymous" media="screen" />
    

    

    

    

    <link rel="icon" type="image/png" href="http://rayyildiz.com/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="http://rayyildiz.com/images/favicon-16x16.png" sizes="16x16">

    

    <meta name="generator" content="Hugo 0.53" />
  </head>

  <body class=" ">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="http://rayyildiz.com">
      Ramazan AYYILDIZ
    </a>
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="http://rayyildiz.com/tr/hakkimda/">Hakkimda</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="http://rayyildiz.com/tr/posts/">Blog</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="http://rayyildiz.com/tr/projeler/">Projeler</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="http://rayyildiz.com/tr/iletisim/">Iletisim</a>
          </li>
        
      
      
        
        
        
          
            
              <li class="navigation-item menu-separator">
                <span>|</span>
              </li>
              
            
            <li class="navigation-item">
              <a href="http://rayyildiz.com/">English</a>
            </li>
          
        
          
        
      
    </ul>
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">JDK6 da Dependency Injection (ServiceLoader)</h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fas fa-calendar"></i>
              <time datetime='2010-08-22T00:00:00Z'>
                August 22, 2010
              </time>
            </span>
            <span class="reading-time">
              <i class="fas fa-clock"></i>
              One minute read
            </span>
          </div>
          <div class="categories">
  <i class="fas fa-folder"></i>
    <a href="http://rayyildiz.com/tr/categories/genel/">Genel</a>
      <span class="separator">•</span>
    <a href="http://rayyildiz.com/tr/categories/yazilim-gelistirme/">Yazilim Gelistirme</a></div>

          <div class="tags">
  <i class="fas fa-tag"></i>
    <a href="http://rayyildiz.com/tr/tags/java/">java</a></div>

        </div>
      </header>

      <div>
        <p>DI ne olduğuna dair bir yazıyı <a href="http://rayyildiz.net/2010/05/what-is-dependency-injection/">buradan</a> ulaşabilirsiniz. JDK6 da ise ServiceLoader gelmektedir. <a href="http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/util/ServiceLoader.html">ServiceLoader</a> sayesinde bir nevi DI sağlamış olmaktayız. Bunun nasıl yapacağımızı bir örnekle gösterelim.</p>

<p>Uygulamanın örnek test kodlarını <a href="http://github.com/rayyildiz/UserAuthSample">github</a> üzerinden bulabilmeniz mümkündür.</p>

<p>Bu örneği yapabilmek için 3 tane proje oluşturalım. Bu 3 proje ve açıklaması şu şekildedir:</p>

<p><strong>UserAuth</strong>: Arayüzün yer aldığı proje.IUserAuthService diye bir arayüz yer almakta ve bu arayüz login diye bir metot tanımı içermektedir.</p>

<p><strong>UserAuthImpl</strong>: Uygulamanın gerçekleştirildiği sınıf yer alır.</p>

<p><strong>UserAuthTest</strong>: Main sınıfının yer aldığı örnek uygulamadır.</p>

<p><img src="http://rayyildiz.com/images/project_tree1.png" alt="Project Tree" /></p>

<p>Arayüzün yer aldığı UserAuth projesinde farklı olarak META-INF/services klasörü- ve bu klasör içinde com.rayyildiz.userauth.IUserAuthService dosyası yer almaktadır. Bu dosya içine bakarsanız sadece bir satır yer almaktadır.</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">com.rayyildiz.userauth.impl.UserAuthService</pre></div>
<p>ServiceLoader bu dosyalara bakarak hangi implemantosyunu yüklemesi gerektiğini anlar. UserAuth.jar implementasyonun yer aldığı UserAuthImpl.jar referans olarak bilmez. SericeLoader load sırasında bu implementasyonu arayacaktır.</p>

<p>Burada asıl önemli test projemize bakalım:</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#fff;font-weight:bold">package</span> com.rayyildiz.userauth;

<span style="color:#fff;font-weight:bold">import</span> java.util.Iterator;
<span style="color:#fff;font-weight:bold">import</span> java.util.ServiceLoader;

<span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
        ServiceLoader&lt;IUserAuthService&gt; serviceLoader = ServiceLoader.<span style="color:#007f7f">load</span>(IUserAuthService.<span style="color:#007f7f">class</span>);
        Iterator&lt;IUserAuthService&gt; iterator = serviceLoader.<span style="color:#007f7f">iterator</span>();-
        <span style="color:#fff;font-weight:bold">while</span>(iterator!= <span style="color:#fff;font-weight:bold">null</span> &amp;&amp; iterator.<span style="color:#007f7f">hasNext</span>()){
            IUserAuthService userAuthService = iterator.<span style="color:#007f7f">next</span>();
            <span style="color:#fff;font-weight:bold">boolean</span> login = userAuthService.<span style="color:#007f7f">login</span>(<span style="color:#0ff;font-weight:bold">&#34;demo&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;password&#34;</span>);
            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Login for username: demo and password:password is &#34;</span> + login);
        }
    }
}</code></pre></div>
<p>Gördüğünüz gibi test uygulaması implementasyon nesnesini görmez. ServiceLoader META-INF/services içinde yer alan dosyalara bakarak implementasyon nesnelerini örnek projenin olduğu klasörde ve CLASSPATH de arar.</p>

      </div>

      <footer>
        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "yourdiscussshortname" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </footer>
    </article>

    
  </section>

      </div>

      <footer class="footer">
  <section class="container">
    
      <p>When information is shared, it will grow even more</p>
    
    
    
    
  </section>
</footer>

    </main>

    

  </body>

</html>
